<!--登録された店舗レビュー一覧を表示-->
<div class="row">
  <div class="col-md-10">
    <h3>店舗レビュー一覧</h3>
  </div>
</div>
<table class="table table-borderless">
  <tbody>
    <% @store.store_reviews.each do |store_review| %>
      <tr>
        <td><%= image_tag store_review.end_user.profile_image, size: "40x40", class: "rounded-circle" %></td>
        <td id="show_raty<%= store_review.id %>"></td>
        <script>
        document.addEventListener("turbolinks:load", function() {
            let show = document.querySelector('#show_raty<%= store_review.id %>');
            show.textContent = '';
            let val = {
                starOn: '<%= asset_path('star-on.png') %>',
                starOff: '<%= asset_path('star-off.png') %>',
                readOnly: true,
                score: <%= store_review.rate %>,
            };
            raty(show,val);
        });
        </script>
        <td><%= store_review.end_user.name %></td>
      </tr>
      <tr>
        <td></td>
        <td><%= store_review.comment %></td>
      </tr>
      <tr>
        <% if current_end_user == store_review.end_user || admin_signed_in? %>
          <td><%= link_to '削除する', store_store_review_path(store_review.store, store_review), method: :delete, class: "btn btn-danger" %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>